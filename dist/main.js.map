{"version":3,"file":"main.js","mappings":"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","sources":["webpack://whack-a-mole/./src/index.js"],"sourcesContent":["// const cursor = document.querySelector('.cursor')\n\n// const canvas = document.getElementById(\"canvas\");\n// console.log('aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa');\n// const ctx = canvas.getContext('2d');\n\n// var bgImg = new Image();\n// bgImg.src = \"../img/background.png\";\n// bgImg.onload = function() {\n//   ctx.drawImage(bgImg, 110, 200);\n// }\n\n// var img = new Image();\n// img.src = \"../img/sprite8.png\";\n// img.onload = function(){\n//     ctx.drawImage(img, 140, 200);\n// };\n\n// const background = new Image();\n// background.src = '../img/background.bmp';\n// background.onload = function(){\n//     ctx.drawImage(background,0,0, canvas.width, canvas.height);   \n// }\n\n\nwindow.onload = function() {\n    // 1. Initializing game elements\n    const box = document.querySelector('.box');\n    const score = document.querySelector('.score');\n    const timebox = document.querySelector('.time');\n    const pauseButton = document.querySelector('.pause');\n    const startButton = document.querySelector('.start');\n    const restartButton = document.querySelector('.restart');\n    const gameoverBox = document.querySelector(\".gameover\");\n    let current_score = 0;\n\n    let timer = null;\n    let timeboxWidth = timebox.offsetWidth\n    console.log(timeboxWidth)\n    // ture => game has started; false => game is paused\n    let gameState = true;\n\n    // seven positions for mole to show up [{}{}{}{}{}{}{}]\n    let sevenMolesPos = [\n      {top: \"11%\", left: \"5.5%\"},\n      {top: \"8%\", left: \"24.5%\"},\n      {top: \"11%\", left: \"44.5%\"},\n      {top: \"25.5%\", left: \"26.5%\"},\n      {top: \"27%\", left: \"50%\"},\n      {top: \"40%\", left: \"8.5%\"},\n      {top: \"41%\", left: \"42.5%\"}\n    ];\n\n    // seven positions for whack to show up\n\n    // previous hole index\n    let prevIndex = -1;\n    // timer for generating moles\n    let moleTimer = null;\n    // mole shows up animation timer\n    let upTimer = null;\n    // mole goes down \n    let downTimer = null;\n\n    // sound effect \n    let hasSound = true;\n    // background music\n    // let hasBGM = true;\n    // const BGM = new Audio(\"../audio/BGM.mp3\");\n    // BGM.loop = true;\n    // BGM.play();\n\n    \n\n    // 2. Start game after clicking the start button\n    startButton.onclick = function(){\n        // hide start button after clicked\n        this.style.display = 'None';\n        // show pause button\n        pauseButton.style.display = 'block';\n        // start timer\n        timeReduce();\n        // display mole\n        showMole();\n    }\n    // 3. Start game timer\n    function timeReduce(){\n        timer = setInterval(function (){\n            timeboxWidth--;\n            timebox.style.width = timeboxWidth + \"px\";\n            if (timeboxWidth <= 0){\n                clearInterval(timer);\n                // gamer over\n                gameover();\n            }\n        }, 50)\n    }\n\n    // 4. game over\n    function gameover() {\n        restartButton.style.display=\"block\";\n        gameoverBox.style.display=\"block\";\n        \n        //stop generaing any mole\n        clearInterval(moleTimer)\n        alert(\"Game over!\")\n    }\n    // 5. pause game\n    pauseButton.onclick = function(){\n        if(gameState) {\n            // pause game timer\n            clearInterval(timer);\n            // pause generating mole\n            clearInterval(moleTimer);\n            // pause button => continue button\n            this.style.backgroundImage=\"url(../img/restart.png)\"\n            gameState = false;\n          }\n          else{\n            // start timer\n            timeReduce();\n            showMole();\n            // start button => pause button\n            this.style.backgroundImage=\"url(../img/pause.png)\"\n            gamestate = true;\n        }\n    }\n    // 6. generate mole\n    function addMole() {\n      // create imge\n      let mole = document.createElement(\"img\");\n      // i. which random hole\n      // generate a random index 0-7\n      mole.holeIndex = Math.floor(Math.random()*7);\n      // ensure no repetitive hole position\n      while(mole.holeIndex === prevIndex){\n        mole.holeIndex = Math.floor(Math.random()*7);\n      }\n      prevIndex = mole.holeIndex;\n      // 7. holes locations\n      // assign hole pos to mole\n      mole.style.top = sevenMolesPos[mole.holeIndex].top\n      mole.style.left = sevenMolesPos[mole.holeIndex].left\n      // add mole image\n      // mole.src=\"../img/m1.png\"\n      \n      // ii. mole or snake\n      mole.who = ''\n      let randomNumber = Math.floor(Math.random()*10)\n      if (randomNumber === 0) {\n        mole.who = 's';\n      }\n      else if (randomNumber === 1){\n        mole.who = 'f';\n      }\n      else mole.who = 'm';\n      console.log(`${mole.who} is at hole ${mole.holeIndex}`)\n\n      box.appendChild(mole);\n      // showing up\n      let upIndex = 0;\n      upTimer = setInterval(function(){\n        if (mole.who === 'm' || mole.who === 'f'){\n          mole.src = \"../img/\" + mole.who + upIndex+\".png\";\n          upIndex++;\n          if (mole.who==='m' && upIndex > 1){\n            setTimeout(function(){}, 80)\n            mole.mineIndex = Math.floor(Math.random()*7);\n            mole.src = \"../img/m1\" + mole.mineIndex + \".png\";\n            clearInterval(upTimer);\n          }\n          else if(mole.who==='f' && upIndex > 1){\n            setTimeout(function(){}, 80)\n            mole.src = \"../img/f2.png\";\n            clearInterval(upTimer);\n          }\n        }\n      }, 80)\n\n      // Going down\n      let downIndex = 1 \n      if (mole.who==='m'){\n        whack(mole);\n        setTimeout(function(){}, 80);\n        // let moel stays for 1 sec\n        mole.out = setTimeout(function(){\n          downTimer = setInterval(function(){\n            mole.src = \"../img/m\" + downIndex + \".png\";\n            downIndex --;\n            if (downIndex < 0){\n              clearInterval(downTimer);\n              clearInterval(mole.out);\n              // delete mole element from box\n              box.removeChild(mole);\n            }\n          }, 80)\n        }, 1000)\n      }\n      else if (mole.who==='f'){\n        downIndex = 2;\n        mole.out = setTimeout(function(){\n          downTimer = setInterval(function(){\n            mole.src = \"../img/\" + mole.who + downIndex + \".png\";\n            downIndex --;\n            if (downIndex < 0){\n              clearInterval(downTimer);\n              clearInterval(mole.out);\n              // delete mole element from box\n              box.removeChild(mole);\n            }\n          }, 80)\n        }, 1000)\n        whack(mole);\n      }\n    }\n\n    // gennerate many moles\n    function showMole() {\n      moleTimer = setInterval(function(){\n        addMole()\n      }, 1000)\n    }\n    // 8. whack a mole\n    function whack(mole) {\n      mole.onclick = async function() {\n        // close downTimer before whacking\n        // clearInterval(mole.out)\n        // clearInterval(downTimer)\n        // whack timer\n        let whackTimer = null;\n        let hitTimer = null;\n        // let whack = document.createElement(\"img\");\n        // whack.style.top = sevenMolesPos[mole.holeIndex].top;\n        // whack.style.left = sevenMolesPos[mole.holeIndex].left;\n        // box.appendChild(whack);\n        \n        await whackAnimation(mole);\n        if (mole.who === 'm'){\n          \n          switch(mole.mineIndex) {\n            case 0:\n              current_score += 5\n              break;\n            \n          }\n          current_score += 10;\n        }\n        else if(mole.who === 'f'){\n          current_score -= 10;\n        }\n        score.innerHTML = current_score;\n      } \n    }\n    // let whackTimer = null;\n    // let hitTimer = null;\n    async function whackAnimation(mole){\n      let whack = document.createElement(\"img\")\n      whack.style.top = sevenMolesPos[mole.holeIndex].top\n      whack.style.left = sevenMolesPos[mole.holeIndex].left\n      box.appendChild(whack)\n\n      if (mole.who === 'm'){\n        mole.src = \"../img/m1\" + mole.mineIndex + \".png\";\n      }\n      else if (mole.who === 'f'){\n        mole.src = \"../img/f2\" + \".png\";\n      }\n      let whackIndex = 0; \n      whackTimer = setInterval(function(){\n      whack.src = \"../img/w\" + whackIndex + \".png\";\n      whackIndex++;\n      // console.log(\"whackIndex:\" + whackIndex)\n        if (hasSound && whackIndex === 2 && (mole.who === 'm') || (mole.who === 's')) {\n          const whackSound = new Audio(\"../audio/whack.mp3\");\n          whackSound.play();\n        }\n        else if (hasSound && whackIndex === 2 && (mole.who === 'f')) {\n          const whackSound = new Audio(\"../audio/wrong-whack.mp3\");\n          whackSound.play();\n        }\n        if (whackIndex > 5) {\n          clearInterval(whackTimer);\n          box.removeChild(whack);\n          clearInterval(mole.out);\n          clearInterval(downTimer);\n          box.removeChild(mole);\n        }\n      }, 80)\n    }\n}\n\n\n\n\n"],"names":["window","onload","box","document","querySelector","score","timebox","pauseButton","startButton","restartButton","gameoverBox","current_score","timer","timeboxWidth","offsetWidth","console","log","gameState","sevenMolesPos","top","left","prevIndex","moleTimer","upTimer","downTimer","timeReduce","setInterval","style","width","clearInterval","display","alert","showMole","mole","createElement","holeIndex","Math","floor","random","who","randomNumber","appendChild","upIndex","src","setTimeout","mineIndex","downIndex","whack","out","removeChild","addMole","onclick","async","whackIndex","whackTimer","Audio","play","whackAnimation","innerHTML","this","backgroundImage","gamestate"],"sourceRoot":""}